[mysqld]
skip-name-resolve
user   = mysql
pid-file = /var/run/mysqld/mysqld.pid
socket   = /var/run/mysqld/mysqld.sock
port   = 3306
basedir    = /usr
datadir    = /var/lib/mysql
innodb-temp-data-file-path = ../../../run/mysqld/ibtmp1:12M:autoextend
tmpdir   = /tmp
lc-messages-dir  = /usr/share/mysql
explicit_defaults_for_timestamp

#InnoDB Tweak
innodb_buffer_pool_size = 64G
innodb_buffer_pool_instances = 32
innodb_buffer_pool_load_at_startup = ON
transaction-isolation = REPEATABLE-READ
innodb_flush_log_at_trx_commit = 2
innodb_log_file_size = 8G
innodb_log_buffer_size = 8M
innodb_read_io_threads = 16
innodb_write_io_threads = 8
innodb_io_capacity = 200
innodb_io_capacity_max = 400

#Replication
log-bin = /var/log/mysql/mysql-bin.log
binlog-ignore-db = information_schema
binlog-ignore-db = mysql
gtid_mode = ON
enforce_gtid_consistency = ON
log-slave-updates
replicate-rewrite-db='ghtk->ghtk_chat'
replicate-wild-do-table=ghtk_chat.users
replicate-wild-do-table=ghtk_chat.shops
replicate-wild-ignore-table=ghtk%.%
sync_binlog = 0

log-error    = /var/log/mysql/error.log
slow-query-log
log-output = FILE
slow_query_log_file = /var/log/mysql/slow_queries.log
expire_logs_days = 7
log_error_verbosity = 2
long_query_time = 30

# Recommended in standard MySQL setup
sql_mode=NO_ENGINE_SUBSTITUTION

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
default-time-zone = '+07:00'
log_timestamps = SYSTEM
